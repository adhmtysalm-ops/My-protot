<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADHAM ATYA | All Works</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#D4AF37">
    
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
        /* نفس التنسيقات بالظبط */
        :root { --bg-color: #0a0a0a; --surface-color: #121212; --text-main: #f0f0f0; --text-muted: #888888; --accent-gold: #D4AF37; --border-light: rgba(212, 175, 55, 0.2); }
        body.light-mode { --bg-color: #F4F1EA; --surface-color: #FFFFFF; --text-main: #151515; --text-muted: #4a4a4a; --accent-gold: #A68A36; --border-light: rgba(166, 138, 54, 0.3); }
        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }
        body { background-color: var(--bg-color); color: var(--text-main); font-family: 'Manrope', sans-serif; overflow-x: hidden; transition: background-color 0.5s, color 0.5s; }
        
        #starfield { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .noise-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 900; opacity: 0.03; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAGFBMVEUAAAA5OTkAAABMTExERERmZmYzMzMyMjJ4358EAAAACHRSTlMAM8zMzMzMzM31FX+jAAAASUlEQVQ4y2NgwA78//9fYI7///9/gRj///8/wIw/Pz9fgjH+/P37F8YA48/fv39gDDD+/PnzB8YA48+fP39gDDAwMDAwMDAwMAAA2w0f849g0OAAAAAASUVORK5CYII="); }
        
        .cursor-dot, .cursor-outline { position: fixed; transform: translate(-50%, -50%); border-radius: 50%; pointer-events: none; z-index: 9999; will-change: transform; }
        .cursor-dot { width: 8px; height: 8px; background-color: var(--accent-gold); left:0; top:0; }
        .cursor-outline { width: 40px; height: 40px; border: 1px solid var(--accent-gold); transition: width 0.2s, height 0.2s, background-color 0.2s; left:0; top:0; }
        body.hovering .cursor-outline { width: 60px; height: 60px; background-color: rgba(212, 175, 55, 0.1); border-color: transparent; }

        .page-header { padding: 100px 20px 30px; text-align: center; border-bottom: 1px solid var(--border-light); }
        .page-title { font-size: 4rem; margin-bottom: 20px; font-family: 'Playfair Display', serif; }
        .back-link { font-size: 1rem; color: var(--accent-gold); text-transform: uppercase; letter-spacing: 2px; }
        
        .filters-container { display: flex; justify-content: center; gap: 15px; margin: 30px 0 50px; flex-wrap: wrap; }
        .filter-btn { background: transparent; border: 1px solid var(--border-light); color: var(--text-muted); padding: 10px 25px; font-family: 'Manrope', sans-serif; font-size: 0.9rem; cursor: pointer; transition: 0.3s; border-radius: 30px; text-transform: uppercase; letter-spacing: 1px; }
        .filter-btn:hover, .filter-btn.active { border-color: var(--accent-gold); color: var(--accent-gold); background: rgba(212, 175, 55, 0.05); }

        .controls-container { position: fixed; top: 30px; right: 30px; z-index: 1000; display: flex; gap: 40px; }
        .control-btn { width: 45px; height: 45px; border-radius: 50%; border: 1px solid var(--border-light); background: rgba(20,20,20,0.1); backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .control-btn svg { width: 20px; height: 20px; fill: var(--text-main); }
        .control-btn:hover { border-color: var(--accent-gold); transform: scale(1.1); }

        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .gallery-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 40px; margin-top: 20px; align-items: start; }
        .work-item { position: relative; opacity: 0; animation: fadeIn 0.5s forwards; display: block; }
        @keyframes fadeIn { to { opacity: 1; } }
        
        .work-img-container { width: 100%; height: auto; overflow: hidden; background-color: transparent; border-radius: 8px; }
        .work-img-container img { width: 100%; height: auto; object-fit: cover; transition: transform 0.8s; filter: grayscale(100%); pointer-events: none; user-select: none; }
        .work-item:hover .work-img-container img { transform: scale(1.05); filter: grayscale(0%); }
        .work-info { padding-top: 15px; display: flex; justify-content: space-between; align-items: center; }
        .work-title { font-size: 1.5rem; font-family: 'Playfair Display', serif; }
        .work-cat { color: var(--accent-gold); text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; border: 1px solid var(--border-light); padding: 5px 10px; border-radius: 20px; }

        #contact { border-top: 1px solid var(--border-light); padding-top: 80px; margin-top: 50px; padding-bottom: 80px; }
        .contact-container { max-width: 700px; margin: 0 auto; text-align: center; }
        .form-input { width: 100%; background: transparent; border: none; border-bottom: 1px solid var(--border-light); padding: 15px 0; color: var(--text-main); font-family: 'Manrope', sans-serif; font-size: 1.1rem; transition: 0.3s; }
        .form-input:focus { outline: none; border-bottom-color: var(--accent-gold); }
        .btn-luxury { display: inline-block; padding: 15px 50px; border: 1px solid var(--accent-gold); color: var(--text-main); font-family: 'Playfair Display', serif; font-size: 1.2rem; transition: 0.4s; background: transparent; cursor: pointer; margin-top: 20px; }
        .btn-luxury:hover { background-color: var(--accent-gold); color: #000; letter-spacing: 2px; }
        
        .footer-icons { display: flex; justify-content: center; gap: 30px; margin-bottom: 30px; margin-top: 30px; }
        .footer-icon { width: 50px; height: 50px; border: 1px solid var(--border-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .footer-icon svg { width: 20px; height: 20px; fill: var(--text-main); }
        .footer-icon:hover { border-color: var(--accent-gold); transform: translateY(-5px); }
        .footer-icon:hover svg { fill: var(--accent-gold); }

        @media (max-width: 768px) {
            * { cursor: auto !important; }
            .cursor-dot, .cursor-outline { display: none !important; }
            .page-title { font-size: 2.5rem; }
            .gallery-grid { grid-template-columns: 1fr; }
            .work-item { margin-top: 0 !important; margin-bottom: 40px; }
        }
    </style>
</head>
<body>
    <canvas id="starfield"></canvas>
    <div class="noise-overlay"></div>
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <div class="controls-container">
        <div class="control-btn link-hover" id="theme-toggle">
            <svg id="theme-icon" viewBox="0 0 24 24"><path d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/></svg>
        </div>
        <div class="control-btn link-hover">
            <a href="index.html" style="display:flex;align-items:center;justify-content:center;width:100%;height:100%;">
                <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            </a>
        </div>
    </div>

    <div class="page-header">
        <a href="index.html" class="back-link link-hover">← Back to Home</a>
        <h1 class="page-title">Complete Archive</h1>
        <p style="color:var(--text-muted)">A collection of my finest work.</p>
    </div>

    <div class="filters-container">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn link-hover" data-filter="Branding">Branding</button>
        <button class="filter-btn link-hover" data-filter="Packaging">Packaging</button>
        <button class="filter-btn link-hover" data-filter="Art Direction">Art Direction</button>
        <button class="filter-btn link-hover" data-filter="Typography">Typography</button>
        <button class="filter-btn link-hover" data-filter="Web Design">Web Design</button>
        <button class="filter-btn link-hover" data-filter="3D Design">3D Design</button>
    </div>

    <div class="container">
        <div class="gallery-grid" id="works-container">
            
            <div class="work-item link-hover">
                <div class="work-img-container"><img src="/images/1.png" loading="lazy" alt="Royal Brand"></div>
                <div class="work-info"><span class="work-title">Royal Brand</span><span class="work-cat">Branding</span></div>
            </div>
            <div class="work-item link-hover">
                <div class="work-img-container"><img src="/images/2.jpg" loading="lazy" alt="Oud Scent"></div>
                <div class="work-info"><span class="work-title">Oud Scent</span><span class="work-cat">Packaging</span></div>
            </div>
            <div class="work-item link-hover">
                <div class="work-img-container"><img src="3.png" loading="lazy" alt="Architect V"></div>
                <div class="work-info"><span class="work-title">Architect V</span><span class="work-cat">Art Direction</span></div>
            </div>
            <div class="work-item link-hover">
                <div class="work-img-container"><img src="4.png" loading="lazy" alt="Calligraphy"></div>
                <div class="work-info"><span class="work-title">Calligraphy</span><span class="work-cat">Typography</span></div>
            </div>
            <div class="work-item link-hover">
                <div class="work-img-container"><img src="/images/5.png" loading="lazy" alt="Modern Interior"></div>
                <div class="work-info"><span class="work-title">Modern Interior</span><span class="work-cat">3D Design</span></div>
            </div>
            <div class="work-item link-hover">
                <div class="work-img-container"><img src="6.png" loading="lazy" alt="Tech Startup"></div>
                <div class="work-info"><span class="work-title">Tech Startup</span><span class="work-cat">Web Design</span></div>
            </div>
            <div class="work-item link-hover">
                <div class="work-img-container"><img src="7.png" loading="lazy" alt="New Project"></div>
                <div class="work-info"><span class="work-title">New Project</span><span class="work-cat">Creative</span></div>
            </div>

            </div>
    </div>

    <footer id="contact">
        <div class="contact-container">
            <h2 style="margin-bottom: 30px; color: var(--accent-gold); letter-spacing:4px; font-size:1rem;">GET IN TOUCH</h2>
            <form id="contact-form">
                <input type="text" class="form-input link-hover" placeholder="Your Name" required>
                <input type="email" class="form-input link-hover" placeholder="Your Email" required>
                <textarea class="form-input link-hover" placeholder="How can I help you?" required style="height:100px; resize:none; margin-top:20px;"></textarea>
                <button type="submit" id="submit-btn" class="btn-luxury link-hover">Send Message</button>
            </form>
            <div class="footer-icons">
                <a href="https://www.instagram.com/adhom1592009" class="footer-icon link-hover" target="_blank"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>
                <a href="mailto:adhmtysalm@gmail.com" class="footer-icon link-hover"><svg viewBox="0 0 24 24"><path d="M0 3v18h24v-18h-24zm6.623 7.929l-4.623 5.712v-9.458l4.623 3.746zm-4.141-5.929h19.035l-9.517 7.713-9.518-7.713zm7.494 6.105l-4.476-3.617 5.514 4.493 1.22 1.05 1.221-1.05 5.514-4.493-4.477 3.617 5.509 6.895h-15.534l5.509-6.895zm6.802 1.558l4.622-3.746v9.458l-4.622-5.712z"/></svg></a>
            </div>
            <p style="color:var(--text-muted); font-size: 0.9rem;">&copy; 2025 ADHAM ATYA. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        const themeBtn = document.getElementById('theme-toggle'); const themeIcon = document.getElementById('theme-icon');
        const sunPath = "M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.79 1.41-1.41-1.79-1.79-1.41 1.41zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z";
        const moonPath = "M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z";
        if(localStorage.getItem('theme') === 'light'){ document.body.classList.add('light-mode'); themeIcon.querySelector('path').setAttribute('d', sunPath); }
        themeBtn.addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
            themeIcon.querySelector('path').setAttribute('d', isLight ? sunPath : moonPath);
        });

        const cursorDot = document.querySelector('.cursor-dot'); const cursorOutline = document.querySelector('.cursor-outline');
        window.addEventListener('mousemove', (e) => {
            if(getComputedStyle(cursorDot).display !== 'none'){ cursorDot.style.left = `${e.clientX}px`; cursorDot.style.top = `${e.clientY}px`; cursorOutline.animate({ left: `${e.clientX}px`, top: `${e.clientY}px` }, { duration: 500, fill: "forwards" }); }
        });
        const canvas = document.getElementById('starfield'); const ctx = canvas.getContext('2d');
        let width, height, stars = [];
        function initStars() { width = window.innerWidth; height = window.innerHeight; canvas.width = width; canvas.height = height; stars = []; for(let i=0; i<100; i++){ stars.push({ x: Math.random() * width, y: Math.random() * height, size: Math.random() * 2, speed: Math.random() * 0.5 }); } }
        function animateStars() { ctx.clearRect(0,0,width,height); ctx.fillStyle = document.body.classList.contains('light-mode') ? '#a68a36' : '#ffffff'; stars.forEach(star => { star.y -= star.speed; if(star.y < 0) star.y = height; ctx.beginPath(); ctx.arc(star.x, star.y, star.size, 0, Math.PI*2); ctx.fill(); }); requestAnimationFrame(animateStars); }
        window.addEventListener('resize', initStars); initStars(); animateStars();
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.onkeydown = e => { if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0)))) return false; }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { initializeAppCheck, ReCaptchaV3Provider } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app-check.js";
        import { getFirestore, collection, getDocs, orderBy, query, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAKIka5HU3X_g0TLWknUEtOu6ydFsvLU8E",
            authDomain: "adham-ayta.firebaseapp.com",
            projectId: "adham-ayta",
            storageBucket: "adham-ayta.firebasestorage.app",
            messagingSenderId: "584582572316",
            appId: "1:584582572316:web:ff476d21cfaab3c49af2d9"
        };

        const app = initializeApp(firebaseConfig);
        const appCheck = initializeAppCheck(app, {
            provider: new ReCaptchaV3Provider('6Lfn0i4sAAAAAIIZgxlAewlOgB-IQ5RW5mfdzrYg'), 
            isTokenAutoRefreshEnabled: true
        });
        const db = getFirestore(app);
        
        const grid = document.getElementById('works-container');

        // دالة جلب الصور الجديدة
        async function loadWorks() {
            try {
                // جلب الصور الجديدة فقط
                const q = query(collection(db, "portfolio_items"), orderBy("createdAt", "desc"));
                const querySnapshot = await getDocs(q);
                
                // ملحوظة: احنا هنا مش بنمسح الصور القديمة، بنزود عليها
                
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const div = document.createElement('div');
                    div.className = 'work-item link-hover';
                    div.innerHTML = `
                        <div class="work-img-container"><img src="${data.imageUrl}" loading="lazy" alt="${data.title}"></div>
                        <div class="work-info"><span class="work-title">${data.title}</span><span class="work-cat">${data.category}</span></div>
                    `;
                    grid.appendChild(div);
                });

                // بعد ما القديم والجديد بقوا موجودين.. نطبق التصميم على كله
                // بنجمع كل العناصر (الثابتة + الديناميكية)
                const allItems = Array.from(document.querySelectorAll('.work-item'));
                initDesign(allItems);

            } catch (error) {
                console.error("Error loading works:", error);
                // لو حصل مشكلة، شغل التصميم على الصور القديمة بس
                const staticItems = Array.from(document.querySelectorAll('.work-item'));
                initDesign(staticItems);
            }
        }

        // --- وظائف التصميم (Shuffle & Filter) ---
        function initDesign(workItems) {
            // 1. Shuffle (لخبطة كله مع بعضه)
            for (let i = workItems.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                grid.appendChild(workItems[j]);
            }
            updateMasonry();

            // 2. Filters
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const val = btn.getAttribute('data-filter');
                    
                    workItems.forEach(item => {
                        const cat = item.querySelector('.work-cat').textContent.trim();
                        // الفلترة بتشتغل على كله (قديم وجديد)
                        if (val === 'all' || cat === val) {
                            item.style.display = 'block';
                            item.style.animation = 'none'; item.offsetHeight; item.style.animation = 'fadeIn 0.5s forwards';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                    updateMasonry();
                });
            });

            // 3. Hover Effects
            document.querySelectorAll('.link-hover').forEach(l => {
                l.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
                l.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
            });
        }

        function updateMasonry() {
            if (window.innerWidth > 768) {
                const visibleItems = Array.from(document.querySelectorAll('.work-item')).filter(i => i.style.display !== 'none');
                visibleItems.forEach((item, index) => {
                    item.style.marginTop = (index % 2 !== 0) ? '80px' : '0'; 
                });
            }
        }

        // ابدأ التحميل
        loadWorks();

        // --- Contact Form ---
        (function() { emailjs.init("SLAJxc8UY_vefht9D"); })();
        const contactForm = document.getElementById('contact-form');
        const submitBtn = document.getElementById('submit-btn');
        if(contactForm) {
            contactForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                submitBtn.innerText = "Processing...";
                let inputs = contactForm.querySelectorAll('input, textarea');
                let name = inputs[0].value.trim(); let email = inputs[1].value.trim(); let message = inputs[2].value.trim();
                if(!name || !email || !message) { alert("Please fill all fields."); submitBtn.innerText = "Send Message"; return; }
                var templateParams = { user_name: name, user_email: email, user_message: message };
                try {
                    await addDoc(collection(db, "contact_messages"), { name: name, email: email, message: message, sentAt: serverTimestamp(), status: "new" });
                    await emailjs.send("service_ge3lndb", "template_io95nhr", templateParams);
                    submitBtn.innerText = "Sent Successfully!"; contactForm.reset(); setTimeout(() => { submitBtn.innerText = "Send Message"; }, 3000);
                } catch (error) { console.error("Error:", error); alert("Failed."); submitBtn.innerText = "Send Message"; }
            });
        }
    </script>
</body>
</html>
